## Installing piring

# Hardware: Raspberry Pi (3B) with touchscreen (ADS7846) and relay board.
# From www.lcdwiki.com/3.5inch_RPi_Display download UbuntuMate:18.04.2
# and put it on the microSD. You might want to run raspi-config to fill out the
# partition size, set passwords etc.:
sudo raspi-config

# Refresh the repo info, upgrade and install prerequisite packages and git:
sudo apt update
sudo apt install sox python-pygame tmux git
sudo apt full-upgrade
# There is a file clash with the bluez-firmware...
sudo dpkg -i --force-overwrite /var/cache/apt/archives/linux-firmware-raspi2_1.20190819-0ubuntu0.18.04.1_armhf.deb

# Allow user to run gpio binary:
chmod u+s /usr/bin/gpio

# Wisely pick your desired screensaver or power timeout, and no lock!
# Allow autostart desktop through Lightdm:
echo -e "[Seat:*]\nautologin-user=pi\nautologin-session=mate" |\
	sudo tee -a /etc/lightdm/lightdm.conf
sudo gpasswd -a pi nopasswdlogin
sudo gpasswd -a pi audio

# Clone repo:
cd
mkdir git
cd git
git clone https://gitlab.com/pepa65/piring
cd piring

# Setup autostart on (re)boot (authorization asked):
source rc.local

# Tweak firmware:
echo -e "# quicker sound\nhdmi_ignore_edid_audio=1" |\
	sudo tee -a /boot/firmware/usercfg.txt
